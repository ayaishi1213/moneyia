<%= render "shared/header" %>

<%# 商品の概要 %>
<div class="item-show">
  <div class="item-box">


    <div class="post-explain-box">
      <span><%= "投稿記事" %></span>
    </div>
    <table class="detail-table">
      <tbody>
        <tr>
          <th class="detail-post">ニックネーム</th>
          <td class="detail-value"><%= @post.user.nickname %>さん</td>
        </tr>
        <tr>
          <th class="detail-post">カテゴリー</th>
          <td class="detail-value"><%= @post.category.name %></td>
        </tr>
        <tr>
          <th class="detail-post">タイトル</th>
          <td class="detail-value"><%= @post.title %></td>
        </tr>
        <tr>
          <th class="detail-post-a">本文</th>
          <td class="detail-value-a"><%= @post.article %></td>
        </tr>
      </tbody>
    </table>
    <% if user_signed_in? %>
    <%= link_to "投稿記事の編集", edit_post_path, method: :get, class: "post-edit-btn" %>
    <p class="or-text">or</p>
    <%= link_to "削除", "#", method: :delete, class:"post-destroy" %>
    <% end %>

    <div class="option">
      <div class="favorite-btn">
        <%= image_tag "star.png" ,class:"favorite-star-icon" ,width:"20",height:"20"%>
        <span>お気に入り 0</span>
      </div>
      <div class="report-btn">
        <%= image_tag "flag.png" ,class:"report-flag-icon" ,width:"20",height:"20"%>
        <span>不適切な商品の通報</span>
      </div>
    </div>
  </div>
  <%# /商品の概要 %>

  <div class="comment-box">
    <form>
      <textarea class="comment-text"></textarea>
      <p class="comment-warn">
        相手のことを考え丁寧なコメントを心がけましょう。
        <br>
        不快な言葉遣いなどは利用制限や退会処分となることがあります。
      </p>
      <button type="submit" class="comment-btn">
        <%= image_tag "comment.png" ,class:"comment-flag-icon" ,width:"20",height:"25"%>
        <span>コメントする<span>
      </button>
    </form>
  </div>

 <div>
  <h4>コメント</h4>
    <div id="comments_area"><!-- #① -->
      <% @comment.each do |comment| %>
       <% unless comment.id.nil? %>
       <p><%= link_to "#{comment.user.name}さん", user_path(comment.user.id) %></p>
       <p>コメント：<%= comment.content %></p>
       <% if comment.user == current_user %>
      <p><%= link_to 'コメントを削除する', post_comment_path(comment.post_id, comment.id), method: :delete, remote: true %></p>
       <% end %>
      <% end %>
     <% end %>
</div>  
    <% if user_signed_in? %>
      <!-- コメント入力欄をブログの詳細ページに表示するためのrender -->
      <%= render partial: 'comments/form', locals: { comment: @comment, post: @post } %>
    <% end %>
  </div>

  
  <%# <div class="links">
    <a href="#" class="change-item-btn">
      ＜ 前の商品
    </a>
    <a href="#" class="change-item-btn">
      後ろの商品 ＞
    </a>
  </div> %>
  <%# 詳細ページで表示されている商品のカテゴリー名を表示しましょう %>
  <%# <a href="#" class="another-item"><%= "商品のカテゴリー名" %><%#をもっと見る</a> %>
  <%# //詳細ページで表示されている商品のカテゴリー名を表示しましょう %>
</div>

<%= render "shared/footer" %>
